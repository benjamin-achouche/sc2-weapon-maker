(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[2],[,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(1),r=Object(c.createContext)({isLoggedIn:!1,token:null,userId:null,urlUserId:null,redirectToAuth:!1,setTheUrlUserId:function(){},setRedirection:function(){},login:function(){},logout:function(){}})},function(e,t,n){"use strict";n(1);var c=n(9),r=(n(50),n(0));t.a=function(e){return e.href?Object(r.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(r.jsx)(c.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.className," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),style:e.style,children:e.children}):Object(r.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.className," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),style:e.style,type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}},function(e,t,n){"use strict";n(1),n(53);var c=n(0);t.a=function(e){return Object(c.jsx)("div",{className:"".concat(e.asClearOverlay?"loading-spinner__clear-overlay":e.asDarkOverlay&&"loading-spinner__dark-overlay"),children:Object(c.jsx)("div",{className:e.big?"size--big":"lds-dual-ring"})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(11),r=n.n(c),a=n(13),s=n(5),o=n(1),i=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(),l=Object(s.a)(i,2),u=l[0],j=l[1],d=Object(o.useRef)([]),b=Object(o.useCallback)(function(){var e=Object(a.a)(r.a.mark((function e(t){var n,a,s,o,i,l,u,b=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.length>1&&void 0!==b[1]?b[1]:"GET",a=b.length>2&&void 0!==b[2]?b[2]:null,s=b.length>3&&void 0!==b[3]?b[3]:{},o=b.length>4&&void 0!==b[4]?b[4]:"json",c(!0),i=new AbortController,d.current.push(i),e.prev=7,e.next=10,fetch(t,{method:n,body:a,headers:s,signal:i.signal});case 10:if(l=e.sent,"json"===o){e.next=17;break}return e.next=14,l;case 14:u=e.sent,e.next=20;break;case 17:return e.next=19,l.json();case 19:u=e.sent;case 20:if(d.current=d.current.filter((function(e){return e!==i})),l.ok){e.next=23;break}throw new Error(u.message);case 23:return c(!1),e.abrupt("return",u);case 27:throw e.prev=27,e.t0=e.catch(7),j(e.t0.message),c(!1),e.t0;case 32:case"end":return e.stop()}}),e,null,[[7,27]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(o.useEffect)((function(){return function(){d.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:u,sendRequest:b,clearError:function(){j(null)}}}},function(e,t,n){"use strict";var c=n(25),r=n(1),a=n.n(r),s=n(7),o=n.n(s),i=n(56),l=n(19),u=(n(52),n(0)),j=function(e){var t=Object(u.jsxs)("div",{className:"modal ".concat(e.className),style:e.style,children:[Object(u.jsx)("header",{className:"modal__header ".concat(e.headerClass),children:Object(u.jsx)("h2",{children:e.header})}),Object(u.jsxs)("form",{onSubmit:e.onSubmit?e.onSubmit:function(e){return e.preventDefault()},children:[Object(u.jsx)("div",{className:"modal__content ".concat(e.contentClass),children:e.children}),Object(u.jsx)("footer",{className:"modal__footer ".concat(e.footerClass),children:e.footer})]})]});return o.a.createPortal(t,document.getElementById("modal-hook"))};t.a=function(e){return Object(u.jsxs)(a.a.Fragment,{children:[e.show&&Object(u.jsx)(l.a,{onClick:e.onCancel}),Object(u.jsx)(i.a,{in:e.show,timeout:200,classNames:"modal",mountOnEnter:!0,unmountOnExit:!0,children:Object(u.jsx)(j,Object(c.a)({},e))})]})}},function(e,t,n){"use strict";n(1);var c=n(7),r=n.n(c),a=(n(51),n(0));t.a=function(e){return r.a.createPortal(Object(a.jsx)("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))}},,,,,,,function(e,t,n){"use strict";n(1);var c=n(18),r=n(15),a=n(0);t.a=function(e){return Object(a.jsx)(c.a,{onCancel:e.onClear,header:"An Error Occurred!",show:!!e.error,footer:Object(a.jsx)(r.a,{onClick:e.onClear,children:"Okay"}),children:Object(a.jsx)("p",{children:e.error})})}},,,,,,,,,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,r=n(1),a=n.n(r),s=n(7),o=n.n(s),i=(n(36),n(11)),l=n.n(i),u=n(13),j=n(5),d=n(2),b=n(9),h=n(28),O=(n(38),n(0)),x=function(e){return Object(O.jsx)("header",{className:"main-header",children:e.children})},f=n(14),p=(n(40),function(e){var t=Object(r.useContext)(f.a);return Object(O.jsxs)("ul",{className:"nav-links",children:[Object(O.jsx)("li",{children:Object(O.jsx)(b.c,{onClick:e.onClick,to:"/",exact:!0,children:"ALL USERS"})}),t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(b.c,{onClick:e.onClick,to:"/".concat(t.userId,"/weapons"),children:"MY WEAPONS"})}),t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(b.c,{onClick:e.onClick,to:"/weapons/new",children:"CREATE WEAPON"})}),!t.isLoggedIn&&Object(O.jsx)("li",{children:Object(O.jsx)(b.c,{onClick:e.onClick,to:"/auth",children:"AUTHENTICATE"})}),t.isLoggedIn&&Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)("button",{className:"logout",onClick:t.logout,children:"LOGOUT"})}),Object(O.jsx)("li",{children:Object(O.jsx)("button",{className:"delete-account",onClick:e.showDeleteAccountWarning,children:"DELETE ACCOUNT"})})]})]})}),m=n(56),v=(n(49),function(e){var t=Object(O.jsx)(m.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0,children:Object(O.jsx)("aside",{className:"side-drawer",onClick:e.onClick,children:e.children})});return o.a.createPortal(t,document.getElementById("side-drawer-hook"))}),g=n(15),k=n(19),w=n(18),C=n(26),I=n(16),E=n(17),y=(n(54),function(e){var t=Object(r.useContext)(f.a),n=Object(E.a)(),c=n.error,s=n.sendRequest,o=n.clearError,i=Object(r.useState)(!1),d=Object(j.a)(i,2),m=d[0],y=d[1],N=Object(r.useState)(!1),S=Object(j.a)(N,2),T=S[0],A=S[1],D=Object(r.useState)(!1),_=Object(j.a)(D,2),U=_[0],L=_[1],z=function(){return y(!1)},R=function(){A(!1)},P=function(){var n=Object(u.a)(l.a.mark((function n(c){var r,a,o,i,u,j;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),n.prev=1,L(!0),t.setRedirection(t.userId,t.urlUserId),n.next=6,s("".concat("https://sc2-weapon-maker.herokuapp.com/api","/users"));case 6:r=n.sent,a=r.users.find((function(e){return e.id===t.userId})),o=a.weapons,i=Object(h.a)(o),n.prev=10,i.s();case 12:if((u=i.n()).done){n.next=18;break}return j=u.value,n.next=16,s("".concat("https://sc2-weapon-maker.herokuapp.com/api","/weapons/").concat(j),"DELETE",null,{Authorization:"Bearer "+t.token});case 16:n.next=12;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(10),i.e(n.t0);case 23:return n.prev=23,i.f(),n.finish(23);case 26:return n.next=28,s("".concat("https://sc2-weapon-maker.herokuapp.com/api","/users/").concat(t.userId),"DELETE",null,{Authorization:"Bearer "+t.token});case 28:t.logout(),e.onDelete(t.userId),L(!1),A(!1),n.next=37;break;case 34:n.prev=34,n.t1=n.catch(1),console.log(n.t1);case 37:case"end":return n.stop()}}),n,null,[[1,34],[10,20,23,26]])})));return function(e){return n.apply(this,arguments)}}();return Object(O.jsxs)(a.a.Fragment,{children:[Object(O.jsx)(C.a,{error:c,onClear:o}),Object(O.jsx)(w.a,{show:T,onCancel:R,header:"Are you sure?",footerClass:"weapon-item__modal-actions",footer:Object(O.jsxs)(a.a.Fragment,{children:[U&&Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(I.a,{asDarkOverlay:!0})}),Object(O.jsx)(g.a,{inverse:!0,onClick:R,children:"CANCEL"}),Object(O.jsx)(g.a,{danger:!0,onClick:P,children:"DELETE"})]}),children:Object(O.jsx)("p",{children:"Are you sure you want to delete your account? All your weapons will also be deleted!"})}),m&&Object(O.jsx)(k.a,{onClick:z}),Object(O.jsx)(v,{show:m,onClick:z,children:Object(O.jsx)("nav",{className:"main-navigation__drawer-nav",children:Object(O.jsx)(p,{})})}),Object(O.jsxs)(x,{children:[Object(O.jsxs)("button",{className:"main-navigation__menu-btn",onClick:function(){return y(!0)},children:[Object(O.jsx)("span",{}),Object(O.jsx)("span",{}),Object(O.jsx)("span",{})]}),Object(O.jsx)("h1",{className:"main-navigation__title",children:Object(O.jsx)(b.b,{to:"/",children:"SC2WeaponMaker"})}),Object(O.jsx)("nav",{className:"main-navigation__header-nav",children:Object(O.jsx)(p,{showDeleteAccountWarning:function(){A(!0)}})})]})]})}),N=a.a.lazy((function(){return n.e(6).then(n.bind(null,92))})),S=a.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(8)]).then(n.bind(null,93))})),T=a.a.lazy((function(){return n.e(7).then(n.bind(null,94))})),A=a.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(10)]).then(n.bind(null,90))})),D=a.a.lazy((function(){return Promise.all([n.e(1),n.e(0),n.e(9)]).then(n.bind(null,91))})),_=a.a.lazy((function(){return n.e(5).then(n.bind(null,95))})),U=function(){var e=Object(E.a)().sendRequest,t=Object(r.useState)(),n=Object(j.a)(t,2),a=(n[0],n[1]),s=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(),o=Object(j.a)(s,2),i=o[0],l=o[1],u=Object(r.useState)(null),d=Object(j.a)(u,2),b=d[0],h=d[1],O=Object(r.useState)(null),x=Object(j.a)(O,2),f=x[0],p=x[1],m=Object(r.useState)(!1),v=Object(j.a)(m,2),g=v[0],k=v[1],w=Object(r.useCallback)((function(e,t,n){a(t),k(!1),p(null),h(e);var c=n||new Date((new Date).getTime()+36e5);l(c),localStorage.setItem("userData",JSON.stringify({userId:e,token:t,expiration:c.toISOString()}))}),[]),C=Object(r.useCallback)((function(){a(null),l(null),h(null),localStorage.removeItem("userData")}),[]),I=Object(r.useCallback)((function(e){p(e)}),[]),E=Object(r.useCallback)((function(e,t){e===t&&k(!0)}),[]);return Object(r.useEffect)((function(){if(n&&i){var e=i.getTime()-(new Date).getTime();c=setTimeout(C,e)}else clearTimeout(c)}),[n,C,i]),Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date(e.expiration)>new Date&&w(e.userId,e.token,new Date(e.expiration))}),[w]),{token:n,login:w,logout:C,userId:b,urlUserId:f,setTheUrlUserId:I,redirectToAuth:g,setRedirection:E}}(),o=s.token,i=s.login,h=s.logout,x=s.userId,p=s.urlUserId,m=s.setTheUrlUserId,v=s.redirectToAuth,g=s.setRedirection;Object(r.useEffect)((function(){(function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e("/users");case 3:n=t.sent,a(n.users),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e,a]);var k;return k=o?Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{path:"/",exact:!0,children:Object(O.jsx)(N,{})}),Object(O.jsx)(d.b,{path:"/:userId/weapons",exact:!0,children:Object(O.jsx)(T,{})}),Object(O.jsx)(d.b,{path:"/weapons/new",exact:!0,children:Object(O.jsx)(S,{})}),Object(O.jsx)(d.b,{path:"/:userId/weapons/view/:weaponId",children:Object(O.jsx)(A,{})}),Object(O.jsx)(d.b,{path:"/:userId/weapons/:weaponId",children:Object(O.jsx)(D,{})}),Object(O.jsx)(d.a,{to:"/"})]}):v?Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{path:"/",exact:!0,children:Object(O.jsx)(N,{})}),Object(O.jsx)(d.b,{path:"/auth",children:Object(O.jsx)(_,{})}),Object(O.jsx)(d.a,{to:"/auth"})]}):Object(O.jsxs)(d.d,{children:[Object(O.jsx)(d.b,{path:"/",exact:!0,children:Object(O.jsx)(N,{})}),Object(O.jsx)(d.b,{path:"/:userId/weapons",exact:!0,children:Object(O.jsx)(T,{})}),Object(O.jsx)(d.b,{path:"/:userId/weapons/view/:weaponId",children:Object(O.jsx)(A,{})}),Object(O.jsx)(d.b,{path:"/auth",children:Object(O.jsx)(_,{})}),Object(O.jsx)(d.a,{to:"/auth"})]}),Object(O.jsx)(f.a.Provider,{value:{isLoggedIn:!!o,token:o,userId:x,urlUserId:p,redirectToAuth:v,login:i,logout:h,setTheUrlUserId:m,setRedirection:g},children:Object(O.jsxs)(b.a,{children:[Object(O.jsx)(y,{onDelete:function(e){console.log(e),a((function(t){return t.filter((function(t){return t.id!==e}))}))}}),Object(O.jsx)("main",{children:Object(O.jsx)(r.Suspense,{fallback:Object(O.jsx)("div",{className:"center",children:Object(O.jsx)(I.a,{})}),children:k})})]})})};o.a.render(Object(O.jsx)(U,{}),document.getElementById("root"))}],[[55,3,4]]]);
//# sourceMappingURL=main.41dcde0e.chunk.js.map