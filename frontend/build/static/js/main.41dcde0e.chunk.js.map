{"version":3,"sources":["shared/context/auth-context.js","shared/components/FormElements/Button.js","shared/components/UIElements/LoadingSpinner.js","shared/hooks/http-hook.js","shared/components/UIElements/Modal.js","shared/components/UIElements/Backdrop.js","shared/components/UIElements/ErrorModal.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","token","userId","urlUserId","redirectToAuth","setTheUrlUserId","setRedirection","login","logout","Button","props","href","className","size","inverse","danger","children","to","exact","style","type","onClick","disabled","LoadingSpinner","asClearOverlay","asDarkOverlay","big","useHttpClient","useState","isLoading","setIsLoading","error","setError","activeHttpRequests","useRef","sendRequest","useCallback","url","a","method","body","headers","httpAbortCtrl","AbortController","current","push","fetch","signal","response","responseData","json","filter","reqCtrl","ok","Error","message","useEffect","forEach","abortCtrl","abort","clearError","ModalOverlay","content","headerClass","header","onSubmit","event","preventDefault","contentClass","footerClass","footer","ReactDom","createPortal","document","getElementById","Modal","Fragment","show","onCancel","in","timeout","classNames","mountOnEnter","unmountOnExit","Backdrop","ReactDOM","ErrorModal","onClear","logoutTimer","MainHeader","NavLinks","auth","useContext","showDeleteAccountWarning","SideDrawer","CSSTransition","MainNavigation","drawerIsOpen","setDrawerIsOpen","showConfirmDeletionModal","setShowConfirmDeletionModal","isDeleting","setIsDeleting","closeDrawerHandler","cancelDeleteAccountHandler","confirmDeleteAccountHandler","process","loadedUser","users","find","user","id","loadedUserWeapons","weapons","weaponId","Authorization","onDelete","console","log","Users","React","lazy","NewWeapon","UserWeapons","ViewWeapon","UpdateWeapon","Auth","App","setLoadedUsers","setToken","tokenExpDate","setTokenExpDate","setUserId","setUrlUserId","setRedirectToAuth","uid","expirationDate","tokenExpirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","urlUid","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","fetchUsers","routes","path","Provider","value","deletedUserId","prevUsers","fallback","render"],"mappings":"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","file":"static/js/main.41dcde0e.chunk.js","sourcesContent":["import { createContext } from 'react';\r\n\r\nexport const AuthContext = createContext({\r\n  isLoggedIn: false,\r\n  token: null,\r\n  userId: null,\r\n  urlUserId: null,\r\n  redirectToAuth: false,\r\n  setTheUrlUserId: () => {},\r\n  setRedirection: () => {},\r\n  login: () => {},\r\n  logout: () => {},\r\n});\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './Button.css';\r\n\r\nconst Button = (props) => {\r\n  if (props.href) {\r\n    return (\r\n      <a\r\n        className={`button button--${props.size || 'default'} ${\r\n          props.inverse && 'button--inverse'\r\n        } ${props.danger && 'button--danger'}`}\r\n        href={props.href}\r\n      >\r\n        {props.children}\r\n      </a>\r\n    );\r\n  }\r\n  if (props.to) {\r\n    return (\r\n      <Link\r\n        to={props.to}\r\n        exact={props.exact}\r\n        className={`button button--${props.size || 'default'} ${\r\n          props.className\r\n        } ${props.inverse && 'button--inverse'} ${\r\n          props.danger && 'button--danger'\r\n        }`}\r\n        style={props.style}\r\n      >\r\n        {props.children}\r\n      </Link>\r\n    );\r\n  }\r\n  return (\r\n    <button\r\n      className={`button button--${props.size || 'default'} ${\r\n        props.className\r\n      } ${props.inverse && 'button--inverse'} ${\r\n        props.danger && 'button--danger'\r\n      }`}\r\n      style={props.style}\r\n      type={props.type}\r\n      onClick={props.onClick}\r\n      disabled={props.disabled}\r\n    >\r\n      {props.children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = (props) => {\n  return (\n    <div\n      className={`${\n        (props.asClearOverlay && 'loading-spinner__clear-overlay') ||\n        (props.asDarkOverlay && 'loading-spinner__dark-overlay')\n      }`}\n    >\n      <div className={props.big ? 'size--big' : 'lds-dual-ring'}></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import { useState, useCallback, useRef, useEffect } from 'react';\r\n\r\nexport const useHttpClient = () => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState();\r\n\r\n  const activeHttpRequests = useRef([]);\r\n\r\n  const sendRequest = useCallback(\r\n    async (url, method = 'GET', body = null, headers = {}, type = 'json') => {\r\n      setIsLoading(true);\r\n      const httpAbortCtrl = new AbortController();\r\n      activeHttpRequests.current.push(httpAbortCtrl);\r\n      try {\r\n        const response = await fetch(url, {\r\n          method,\r\n          body,\r\n          headers,\r\n          signal: httpAbortCtrl.signal,\r\n        });\r\n\r\n        let responseData;\r\n        if (type !== 'json') {\r\n          responseData = await response;\r\n        } else {\r\n          responseData = await response.json();\r\n        }\r\n        activeHttpRequests.current = activeHttpRequests.current.filter(\r\n          (reqCtrl) => reqCtrl !== httpAbortCtrl\r\n        );\r\n\r\n        if (!response.ok) {\r\n          throw new Error(responseData.message);\r\n        }\r\n\r\n        setIsLoading(false);\r\n        return responseData;\r\n      } catch (err) {\r\n        setError(err.message);\r\n        setIsLoading(false);\r\n        throw err;\r\n      }\r\n    },\r\n    []\r\n  );\r\n\r\n  const clearError = () => {\r\n    setError(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      activeHttpRequests.current.forEach((abortCtrl) => abortCtrl.abort());\r\n    };\r\n  }, []);\r\n\r\n  return { isLoading, error, sendRequest, clearError };\r\n};\r\n","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport Backdrop from './Backdrop';\r\nimport './Modal.css';\r\n\r\nconst ModalOverlay = (props) => {\r\n  const content = (\r\n    <div className={`modal ${props.className}`} style={props.style}>\r\n      <header className={`modal__header ${props.headerClass}`}>\r\n        <h2>{props.header}</h2>\r\n      </header>\r\n      <form\r\n        onSubmit={\r\n          props.onSubmit ? props.onSubmit : (event) => event.preventDefault()\r\n        }\r\n      >\r\n        <div className={`modal__content ${props.contentClass}`}>\r\n          {props.children}\r\n        </div>\r\n        <footer className={`modal__footer ${props.footerClass}`}>\r\n          {props.footer}\r\n        </footer>\r\n      </form>\r\n    </div>\r\n  );\r\n\r\n  return ReactDom.createPortal(content, document.getElementById('modal-hook'));\r\n};\r\n\r\nconst Modal = (props) => {\r\n  return (\r\n    <React.Fragment>\r\n      {props.show && <Backdrop onClick={props.onCancel} />}\r\n      <CSSTransition\r\n        in={props.show}\r\n        timeout={200}\r\n        classNames=\"modal\"\r\n        mountOnEnter\r\n        unmountOnExit\r\n      >\r\n        <ModalOverlay {...props} />\r\n      </CSSTransition>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport './Backdrop.css';\r\n\r\nconst Backdrop = (props) => {\r\n  return ReactDOM.createPortal(\r\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\r\n    document.getElementById('backdrop-hook')\r\n  );\r\n};\r\n\r\nexport default Backdrop;\r\n","import React from 'react';\n\nimport Modal from './Modal';\nimport Button from '../FormElements/Button';\n\nconst ErrorModal = props => {\n  return (\n    <Modal\n      onCancel={props.onClear}\n      header=\"An Error Occurred!\"\n      show={!!props.error}\n      footer={<Button onClick={props.onClear}>Okay</Button>}\n    >\n      <p>{props.error}</p>\n    </Modal>\n  );\n};\n\nexport default ErrorModal;\n","import { useState, useCallback, useEffect } from 'react';\r\n\r\nlet logoutTimer;\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(false);\r\n  const [tokenExpDate, setTokenExpDate] = useState();\r\n  const [userId, setUserId] = useState(null);\r\n  const [urlUserId, setUrlUserId] = useState(null);\r\n  const [redirectToAuth, setRedirectToAuth] = useState(false);\r\n\r\n  const login = useCallback((uid, token, expirationDate) => {\r\n    setToken(token);\r\n    setRedirectToAuth(false);\r\n    setUrlUserId(null);\r\n    setUserId(uid);\r\n    const tokenExpirationDate =\r\n      expirationDate || new Date(new Date().getTime() + 1000 * 3600);\r\n    setTokenExpDate(tokenExpirationDate);\r\n    localStorage.setItem(\r\n      'userData',\r\n      JSON.stringify({\r\n        userId: uid,\r\n        token: token,\r\n        expiration: tokenExpirationDate.toISOString(),\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setTokenExpDate(null);\r\n    setUserId(null);\r\n    localStorage.removeItem('userData');\r\n  }, []);\r\n\r\n  const setTheUrlUserId = useCallback((urlUserId) => {\r\n    setUrlUserId(urlUserId);\r\n  }, []);\r\n\r\n  const setRedirection = useCallback((uid, urlUid) => {\r\n    if (uid === urlUid) {\r\n      setRedirectToAuth(true);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (token && tokenExpDate) {\r\n      const remainingTime = tokenExpDate.getTime() - new Date().getTime();\r\n      logoutTimer = setTimeout(logout, remainingTime);\r\n    } else {\r\n      clearTimeout(logoutTimer);\r\n    }\r\n  }, [token, logout, tokenExpDate]);\r\n\r\n  useEffect(() => {\r\n    const storedData = JSON.parse(localStorage.getItem('userData'));\r\n    if (\r\n      storedData &&\r\n      storedData.token &&\r\n      new Date(storedData.expiration) > new Date()\r\n    ) {\r\n      login(\r\n        storedData.userId,\r\n        storedData.token,\r\n        new Date(storedData.expiration)\r\n      );\r\n    }\r\n  }, [login]);\r\n\r\n  return {\r\n    token,\r\n    login,\r\n    logout,\r\n    userId,\r\n    urlUserId,\r\n    setTheUrlUserId,\r\n    redirectToAuth,\r\n    setRedirection,\r\n  };\r\n};\r\n","import React from 'react';\r\n\r\nimport './MainHeader.css';\r\n\r\nconst MainHeader = (props) => {\r\n  return <header className=\"main-header\">{props.children}</header>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React, { useContext } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { AuthContext } from '../../context/auth-context';\r\nimport './NavLinks.css';\r\n\r\nconst NavLinks = (props) => {\r\n  const auth = useContext(AuthContext);\r\n\r\n  return (\r\n    <ul className=\"nav-links\">\r\n      <li>\r\n        <NavLink onClick={props.onClick} to=\"/\" exact>\r\n          ALL USERS\r\n        </NavLink>\r\n      </li>\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink onClick={props.onClick} to={`/${auth.userId}/weapons`}>\r\n            MY WEAPONS\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink onClick={props.onClick} to=\"/weapons/new\">\r\n            CREATE WEAPON\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n      {!auth.isLoggedIn && (\r\n        <li>\r\n          <NavLink onClick={props.onClick} to=\"/auth\">\r\n            AUTHENTICATE\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n      {auth.isLoggedIn && (\r\n        <React.Fragment>\r\n          <li>\r\n            <button className=\"logout\" onClick={auth.logout}>\r\n              LOGOUT\r\n            </button>\r\n          </li>\r\n          <li>\r\n            <button\r\n              className=\"delete-account\"\r\n              onClick={props.showDeleteAccountWarning}\r\n            >\r\n              DELETE ACCOUNT\r\n            </button>\r\n          </li>\r\n        </React.Fragment>\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default NavLinks;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport './SideDrawer.css';\r\n\r\nconst SideDrawer = (props) => {\r\n  const content = (\r\n    <CSSTransition\r\n      in={props.show}\r\n      timeout={200}\r\n      classNames=\"slide-in-left\"\r\n      mountOnEnter\r\n      unmountOnExit\r\n    >\r\n      <aside className=\"side-drawer\" onClick={props.onClick}>\r\n        {props.children}\r\n      </aside>\r\n    </CSSTransition>\r\n  );\r\n\r\n  return ReactDOM.createPortal(\r\n    content,\r\n    document.getElementById('side-drawer-hook')\r\n  );\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React, { useState, useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport MainHeader from './MainHeader';\r\nimport NavLinks from './NavLinks';\r\nimport SideDrawer from './SideDrawer';\r\nimport Button from '../FormElements/Button';\r\nimport Backdrop from '../UIElements/Backdrop';\r\nimport Modal from '../UIElements/Modal';\r\nimport ErrorModal from '../UIElements/ErrorModal';\r\nimport LoadingSpinner from '../UIElements/LoadingSpinner';\r\nimport { AuthContext } from '../../context/auth-context';\r\nimport { useHttpClient } from '../../hooks/http-hook';\r\nimport './MainNavigation.css';\r\n\r\nconst MainNavigation = (props) => {\r\n  const auth = useContext(AuthContext);\r\n  const { error, sendRequest, clearError } = useHttpClient();\r\n  const [drawerIsOpen, setDrawerIsOpen] = useState(false);\r\n  const [showConfirmDeletionModal, setShowConfirmDeletionModal] = useState(\r\n    false\r\n  );\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const openDrawerHandler = () => setDrawerIsOpen(true);\r\n\r\n  const closeDrawerHandler = () => setDrawerIsOpen(false);\r\n\r\n  const showDeleteAccountWarningHandler = () => {\r\n    setShowConfirmDeletionModal(true);\r\n  };\r\n\r\n  const cancelDeleteAccountHandler = () => {\r\n    setShowConfirmDeletionModal(false);\r\n  };\r\n\r\n  const confirmDeleteAccountHandler = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      setIsDeleting(true);\r\n      auth.setRedirection(auth.userId, auth.urlUserId);\r\n      const responseData = await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users`\r\n      );\r\n\r\n      const loadedUser = responseData.users.find(\r\n        (user) => user.id === auth.userId\r\n      );\r\n      const loadedUserWeapons = loadedUser.weapons;\r\n\r\n      for (const weaponId of loadedUserWeapons) {\r\n        await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}/weapons/${weaponId}`,\r\n          'DELETE',\r\n          null,\r\n          { Authorization: 'Bearer ' + auth.token }\r\n        );\r\n      }\r\n\r\n      await sendRequest(\r\n        `${process.env.REACT_APP_BACKEND_URL}/users/${auth.userId}`,\r\n        'DELETE',\r\n        null,\r\n        { Authorization: 'Bearer ' + auth.token }\r\n      );\r\n      auth.logout();\r\n      props.onDelete(auth.userId);\r\n      setIsDeleting(false);\r\n      setShowConfirmDeletionModal(false);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <Modal\r\n        show={showConfirmDeletionModal}\r\n        onCancel={cancelDeleteAccountHandler}\r\n        header=\"Are you sure?\"\r\n        footerClass=\"weapon-item__modal-actions\"\r\n        footer={\r\n          <React.Fragment>\r\n            {isDeleting && (\r\n              <div className=\"center\">\r\n                <LoadingSpinner asDarkOverlay />\r\n              </div>\r\n            )}\r\n            <Button inverse onClick={cancelDeleteAccountHandler}>\r\n              CANCEL\r\n            </Button>\r\n            <Button danger onClick={confirmDeleteAccountHandler}>\r\n              DELETE\r\n            </Button>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <p>\r\n          Are you sure you want to delete your account? All your weapons will\r\n          also be deleted!\r\n        </p>\r\n      </Modal>\r\n      {drawerIsOpen && <Backdrop onClick={closeDrawerHandler} />}\r\n\r\n      <SideDrawer show={drawerIsOpen} onClick={closeDrawerHandler}>\r\n        <nav className=\"main-navigation__drawer-nav\">\r\n          <NavLinks />\r\n        </nav>\r\n      </SideDrawer>\r\n\r\n      <MainHeader>\r\n        <button\r\n          className=\"main-navigation__menu-btn\"\r\n          onClick={openDrawerHandler}\r\n        >\r\n          <span />\r\n          <span />\r\n          <span />\r\n        </button>\r\n        <h1 className=\"main-navigation__title\">\r\n          <Link to=\"/\">SC2WeaponMaker</Link>\r\n        </h1>\r\n        <nav className=\"main-navigation__header-nav\">\r\n          <NavLinks\r\n            showDeleteAccountWarning={showDeleteAccountWarningHandler}\r\n          />\r\n        </nav>\r\n      </MainHeader>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default MainNavigation;\r\n","import React, { useState, useEffect, Suspense } from 'react';\n\nimport {\n  BrowserRouter as Router,\n  Route,\n  Redirect,\n  Switch,\n} from 'react-router-dom';\n\n// import Users from './users/pages/Users';\n// import NewWeapon from './weapons/pages/NewWeapon';\n// import UserWeapons from './weapons/pages/UserWeapons';\n// import ViewWeapon from './weapons/pages/ViewWeapon';\n// import UpdateWeapon from './weapons/pages/UpdateWeapon';\n// import Auth from './users/pages/Auth';\nimport MainNavigation from './shared/components/Navigation/MainNavigation';\nimport { AuthContext } from './shared/context/auth-context';\nimport { useHttpClient } from './shared/hooks/http-hook';\nimport { useAuth } from './shared/hooks/auth-hook';\nimport LoadingSpinner from './shared/components/UIElements/LoadingSpinner';\n\nconst Users = React.lazy(() => import('./users/pages/Users'));\nconst NewWeapon = React.lazy(() => import('./weapons/pages/NewWeapon'));\nconst UserWeapons = React.lazy(() => import('./weapons/pages/UserWeapons'));\nconst ViewWeapon = React.lazy(() => import('./weapons/pages/ViewWeapon'));\nconst UpdateWeapon = React.lazy(() => import('./weapons/pages/UpdateWeapon'));\nconst Auth = React.lazy(() => import('./users/pages/Auth'));\n\nconst App = () => {\n  const { sendRequest } = useHttpClient();\n  const [loadedUsers, setLoadedUsers] = useState();\n  const {\n    token,\n    login,\n    logout,\n    userId,\n    urlUserId,\n    setTheUrlUserId,\n    redirectToAuth,\n    setRedirection,\n  } = useAuth();\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const responseData = await sendRequest('/users');\n\n        setLoadedUsers(responseData.users);\n      } catch (err) {}\n    };\n    fetchUsers();\n  }, [sendRequest, setLoadedUsers]);\n\n  const deleteAccountHandler = (deletedUserId) => {\n    console.log(deletedUserId);\n    setLoadedUsers((prevUsers) =>\n      prevUsers.filter((user) => user.id !== deletedUserId)\n    );\n  };\n\n  let routes;\n\n  if (token) {\n    routes = (\n      <Switch>\n        <Route path=\"/\" exact>\n          <Users />\n        </Route>\n        <Route path=\"/:userId/weapons\" exact>\n          <UserWeapons />\n        </Route>\n        <Route path=\"/weapons/new\" exact>\n          <NewWeapon />\n        </Route>\n        <Route path=\"/:userId/weapons/view/:weaponId\">\n          <ViewWeapon />\n        </Route>\n        <Route path=\"/:userId/weapons/:weaponId\">\n          <UpdateWeapon />\n        </Route>\n        <Redirect to=\"/\" />\n      </Switch>\n    );\n  } else if (!redirectToAuth) {\n    routes = (\n      <Switch>\n        <Route path=\"/\" exact>\n          <Users />\n        </Route>\n        <Route path=\"/:userId/weapons\" exact>\n          <UserWeapons />\n        </Route>\n        <Route path=\"/:userId/weapons/view/:weaponId\">\n          <ViewWeapon />\n        </Route>\n        <Route path=\"/auth\">\n          <Auth />\n        </Route>\n        <Redirect to=\"/auth\" />\n      </Switch>\n    );\n  } else {\n    routes = (\n      <Switch>\n        <Route path=\"/\" exact>\n          <Users />\n        </Route>\n        <Route path=\"/auth\">\n          <Auth />\n        </Route>\n        <Redirect to=\"/auth\" />\n      </Switch>\n    );\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isLoggedIn: !!token,\n        token: token,\n        userId: userId,\n        urlUserId: urlUserId,\n        redirectToAuth: redirectToAuth,\n        login: login,\n        logout: logout,\n        setTheUrlUserId: setTheUrlUserId,\n        setRedirection: setRedirection,\n      }}\n    >\n      <Router>\n        <MainNavigation onDelete={deleteAccountHandler} />\n        <main>\n          <Suspense\n            fallback={\n              <div className=\"center\">\n                <LoadingSpinner />\n              </div>\n            }\n          >\n            {routes}\n          </Suspense>\n        </main>\n      </Router>\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}